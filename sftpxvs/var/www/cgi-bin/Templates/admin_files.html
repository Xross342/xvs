<script>
  loadT('Manage Videos');
</script>

<TMPL_IF msg>
  <div class="alert alert-success"><TMPL_VAR msg></div>
</TMPL_IF>



<Form style="margin:0;" method="POST">
<input type="hidden" name="op" value="admin_files">
<input type="hidden" name="token" value="<TMPL_VAR token>">
<input type="hidden" name="num" value="<TMPL_VAR num>">

  <div class="block admin-settings p-0 ">

    <table class="table settings-table mb-0 align-middle">

      <tbody>
    <tr>
      <td class="text-lg-end">
    		<label class="col-form-label">Search</label></td>
    	<td class="border-start"><input type="text" name="key" value="<TMPL_VAR key>" class="form-control form-control-sm"></td>
    </tr>


  </tbody>
  </table>


    <div class="collapse" id="fields">
      <table class="table settings-table mb-0 align-middle">

        <tbody>
  <tr>
    <td class="text-lg-end">
      <label class="col-form-label">File code</label></td>
  	<td class="border-start"><input type="text" name="file_code" value="<TMPL_VAR file_code>" class="form-control form-control-sm" style="max-width:150px"></td>
  </tr>
  <tr>
    <td class="text-lg-end">
      <label class="col-form-label">User</label></td>
  	<td class="border-start">


      <div class="g-2 row align-items-center">
      				<div class="col-auto">
                Login:
      				</div>
      				<div class="col-auto">
                <input type="text" name="usr_login" value="<TMPL_VAR usr_login>" class="form-control form-control-sm" style="max-width:60px">
      				</div>
      				<div class="col-auto">
      					usr_id:
      				</div>
      				<div class="col-auto">
      					<input type="text" name="usr_id" value="<TMPL_VAR usr_id>" class="form-control form-control-sm" style="max-width:60px">
      				</div>

      			</div>


    </td>
  </tr>
  <tr>
    <td class="text-lg-end">
      <label class="col-form-label">Size</label></td>
  	<td class="border-start">


      <div class="g-2 row align-items-center">

      				<div class="col-auto">
                <select class="form-select form-select-sm" name="size_type">
                    <option value="o">Orig</option>
                    <option value="l"<TMPL_VAR size_type_l>>L</option>
                    <option value="n"<TMPL_VAR size_type_n>>N</option>
                    <option value="h"<TMPL_VAR size_type_h>>H</option>
                    <option value="x"<TMPL_VAR size_type_x>>X</option>
                    <option value="p"<TMPL_VAR size_type_p>>Pre</option>
                </select>
      				</div>

              <div class="col-auto">
                <div class="g-2 row align-items-center">
                  <div class="col-auto">
                    more than
          				</div>
          				<div class="col-auto">
                    <input type="text" name="size_more" value="<TMPL_VAR size_more>" class="form-control form-control-sm" style="max-width:60px">
          				</div>
          				<div class="col-auto">
                    Mb
          				</div>
                </div>
              </div>

              <div class="col-auto">
                <div class="g-2 row align-items-center">
                  <div class="col-auto">
                  less than
          				</div>
          				<div class="col-auto">
                    <input type="text" name="size_less" value="<TMPL_VAR size_less>" class="form-control form-control-sm" style="max-width:60px">
          				</div>
          				<div class="col-auto">
                    Mb
          				</div>
                </div>
              </div>

      			</div>



      </td>
  </tr>
  <tr>
    <td class="text-lg-end">
      <label class="col-form-label">Views</label></td>
  	<td class="border-start">


      <div class="g-2 row align-items-center">
              <div class="col-auto">
                <div class="g-2 row align-items-center">
                  <div class="col-auto">
                    more than
                  </div>
                  <div class="col-auto">
                    <input type="text" name="views_more" value="<TMPL_VAR views_more>" class="form-control form-control-sm" style="max-width:60px">
                  </div>
                </div>
              </div>
              <div class="col-auto">
                <div class="g-2 row align-items-center">
                  <div class="col-auto">
                    less than
                  </div>
                  <div class="col-auto">
                    <input type="text" name="views_less" value="<TMPL_VAR views_less>" class="form-control form-control-sm" style="max-width:60px">
                  </div>
                </div>
              </div>

            </div>



       </td>
  </tr>
  <tr>
    <td class="text-lg-end">
      <label class="col-form-label">Flags</label></td>
  	<td class="border-start">
      <div class="row">
        <div class="col-auto">
          <label class="form-switcher"><input type="checkbox" name="public_only" value="1" id="pf1"<TMPL_IF public_only> checked</TMPL_IF>>Public</label>
        </div>
        <div class="col-auto">
          <label class="form-switcher"><input type="checkbox" name="premium_only" value="1" id="pf2"<TMPL_IF premium_only> checked</TMPL_IF>>Premium Only</label>
        </div>
      </div>


      </td>
  </tr>
  <tr>
    <td class="text-lg-end">
      <label class="col-form-label">Status</label></td>
  	<td class="border-start">


      <div class="btn-group btn-group-sm">

      <input type="radio" class="btn-check" name="file_status" value="OK" id="fsta1"<TMPL_VAR file_status_OK>>
      <label class="btn btn-outline-primary px-3" for="fsta1">OK</label>

      <input type="radio" class="btn-check" name="file_status" value="PENDING" id="fsta2" <TMPL_VAR file_status_PENDING>>
      <label class="btn btn-outline-primary px-3" for="fsta2">PENDING</label>

      <input type="radio" class="btn-check" name="file_status" value="LOCKED" id="fsta3" <TMPL_VAR file_status_LOCKED>>
      <label class="btn btn-outline-primary px-3" for="fsta3">LOCKED</label>


      </div>


      </td>
  </tr>
  <tr>
    <td class="text-lg-end">
      <label class="col-form-label">Files per page</label></td>
  	<td class="border-start">


      <div class="btn-group btn-group-sm">

      <input type="radio" class="btn-check" name="per_page" id="pp0" value="<TMPL_VAR items_per_page>"<TMPL_UNLESS per_page> checked</TMPL_UNLESS>>
      <label class="btn btn-outline-primary px-3" for="pp0"><TMPL_VAR items_per_page></label>

      <input type="radio" class="btn-check" name="per_page" id="pp50" value="50" <TMPL_VAR per_50>>
      <label class="btn btn-outline-primary px-3" for="pp50">50</label>

      <input type="radio" class="btn-check" name="per_page" id="pp100" value="100" <TMPL_VAR per_100>>
      <label class="btn btn-outline-primary px-3" for="pp100">100</label>

      <input type="radio" class="btn-check" name="per_page" id="pp500" value="500" <TMPL_VAR per_500>>
      <label class="btn btn-outline-primary px-3" for="pp500">500</label>

      <input type="radio" class="btn-check" name="per_page" id="ppall" value="all" <TMPL_VAR per_all>>
      <label class="btn btn-outline-primary px-3" for="ppall">All</label>


      </div>

      </td>
  </tr>
  <tr>
    <td class="text-lg-end">
      <label class="col-form-label">Show thumbnails</label></td>
  	<td class="border-start">
          <label class="form-switcher"><input type="checkbox" name="thumbnail" value="1"<TMPL_IF thumbnail> checked</TMPL_IF>>Enabled</label>
      </td>
  </tr>
  <tr>
    <td class="text-lg-end"></td>
    <td class="border-start">
      <textarea name="mass_search" id="mass_search" wrap="off" style="display:none;" class="form-control form-control-sm" rows=10></textarea>
      <small><a href="#" id="btn1">Mass Search</a></small>
      </td>
  </tr>
  </tbody>
  </table>
    </div>



<table class="table settings-table mb-0 align-middle">

  <body>
<tr>
<td class="text-lg-end border-0"></td>
<td class="border-0">
  <button type="button" data-bs-toggle="collapse" data-bs-target="#fields" class="btn btn-outline-light m-1 collapsed btn-options"></button>
  <input type="submit" value="Show files" class="btn btn-primary">
</td>
</tr>
</body>
</table>


</div>




<div class="table-responsive mb-4">
  <table class="table table-rounded table-hover align-middle table-justify small">
<thead>
  <TR>
      <TH style="width:1%;"><div class="check-radio"><input type="checkbox" id="selall"></div></TH>
      <TH class="text-start" style="width:30%;" title="File Title"><TMPL_VAR s_file_title>File title<TMPL_VAR s2_file_title></TH>
      <TH title="File Size"><TMPL_VAR s_file_size_n>Size<TMPL_VAR s2_file_size_n></TH>
      <TH title="Video duration"><TMPL_VAR s_file_length>Length<TMPL_VAR s2_file_length></TH>
      <TH title="User"><TMPL_VAR s_usr_login>Uploader<TMPL_VAR s2_usr_login></TH>
      <TH title="Downloads"><TMPL_VAR s_file_downloads>DL<TMPL_VAR s2_file_downloads></TH>
      <TH title="Views Full / Started"><TMPL_VAR s_file_views>Views<TMPL_VAR s2_file_views></TH>
      <TH><TMPL_VAR s_file_money>Money<TMPL_VAR s2_file_money></TH>
      <!--TH title="GBytes"><TMPL_VAR s_bandwidth>Bandwidth<TMPL_VAR s2_bandwidth></TH-->
      <TH title="Upload Date"><TMPL_VAR s_file_created>Created<TMPL_VAR s2_file_created></TH>
      <TH title="Server ID">#</TH>
      <TH style="width: 1%;"></TH>
  </TR>
</thead>
<tbody>
  <TMPL_LOOP files>
  <TR align=center>
      <TD<TMPL_IF file_public> class='pub'</TMPL_IF>><div class="check-radio"><input type="checkbox" name="file_id" value="<TMPL_VAR file_id>"></div></TD>
      <TD  class="text-start"<TMPL_VAR td_style>>
          <TMPL_IF video_thumb_url><img src="<TMPL_VAR video_thumb_url>"><br></TMPL_IF>
          <a href="<TMPL_VAR download_link>"><TMPL_VAR file_title_txt></a>
          <TMPL_IF file_premium_only> <tt class="red" title="Premium Only">(P)</tt></TMPL_IF>
      </TD>
      <TD>
          <small>
          <TMPL_IF file_size_o><div>O: <TMPL_VAR file_size_o></div></TMPL_IF>
          <TMPL_IF file_size_n><div>N: <TMPL_VAR file_size_n></div></TMPL_IF>
          <TMPL_IF file_size_h><div>H: <TMPL_VAR file_size_h></div></TMPL_IF>
          <TMPL_IF file_size_x><div>X: <TMPL_VAR file_size_x></div></TMPL_IF>
          <TMPL_IF file_size_l><div>L: <TMPL_VAR file_size_l></div></TMPL_IF>
          <TMPL_IF file_size_p><div>P: <TMPL_VAR file_size_p></div></TMPL_IF>
          </small>
      </TD>
      <TD><TMPL_VAR file_length2></TD>
      <TD><a href="?op=admin_files&usr_id=<TMPL_VAR usr_id><TMPL_VAR token_str>"><TMPL_VAR usr_login></a></TD>
      <TD><a href="?op=admin_views&download=1&file_id=<TMPL_VAR file_id><TMPL_VAR token_str>"><TMPL_VAR file_downloads></a></TD>
      <TD><a href="?op=admin_views&file_id=<TMPL_VAR file_id><TMPL_VAR token_str>"><TMPL_VAR file_views></a></TD>
      <TD><TMPL_VAR file_money></TD>
      <!--TD><TMPL_VAR bandwidth></TD-->
      <TD nowrap>
          <small>
          <TMPL_VAR file_created>
          <br>
          <a href="?op=admin_files&amp;ip=<TMPL_VAR file_ip><TMPL_VAR token_str>"><TMPL_VAR file_ip></a><TMPL_IF country> [<TMPL_VAR country>]</TMPL_IF>
          </small>
      </TD>
      <TD><TMPL_VAR srv_id></TD>
      <TD class="text-nowrap"><a class="me-2" href="<TMPL_VAR site_url>/?op=file_edit&amp;file_code=<TMPL_VAR file_code><TMPL_VAR token_str>"><img src="<TMPL_VAR site_url>/images2/edit.svg" border=0></a> <a href="?op=admin_files&amp;del_code=<TMPL_VAR file_code><TMPL_VAR token_str>" onClick="return confirm('Delete selected files?')"><img src="<TMPL_VAR site_url>/images2/delete.svg" border=0></a></TD>
  </TR>
  </TMPL_LOOP>
</tbody>
<tfoot>
  <TR>
      <TH colspan=14 style="text-align:left;">













<div class="row g-2 align-items-center">
  <TMPL_IF m_a>
  <div class="col-auto"><input type="submit" name="dmca_selected" value="DMCA Delete after <TMPL_VAR m_a_delete_after>h" onClick="return confirm('DMCA Delete selected files after <TMPL_VAR m_a_delete_after> hours?')" class="btn btn-danger"></div>
  <div class="col-auto"> <input type="submit" name="dmca_rename_selected" value="DMCA Rename" onClick="return confirm('DMCA Rename file codes for selected files?')"  class="btn btn-secondary"></div>
  </TMPL_IF>
  <div class="col-auto"><input type="submit" name="del_selected_now" value="Delete now" onClick="return confirm('Delete selected files?')" class="btn btn-danger"></div>
  <div class="col-auto"><input type="submit" name="del_selected" value="Delete" onClick="return confirm('Delete selected files?')" class="btn btn-danger"></div>
  <div class="col-auto"><div class="form-switcher">
    <input type="checkbox" onclick="$('#dinfo').toggle('slow')" id="cdinfo"><label for="cdinfo">reason</label>
  </div></div>
  <div class="col-auto" id="dinfo" style="display:none"><input type="text" name="del_info" class="form-control"></div>


  <TMPL_IF srv_id_copy><div class="col-auto"><input type="submit" name="del_selected_ssd" value="Delete from SSD" class="btn btn-ptimary" onClick="return confirm('Delete selected files from SSD?')"></div></TMPL_IF>


</div>



      </TH>
  </TR>
  <TR>
      <TH colspan=14 style="text-align:left;">
          <input type="button" value="Extra functions..." class="btn btn-primary" onclick="$(this).hide();$('#btn_special').collapse('show');">



          <div id="btn_special" class="collapse">

<div class="row g-2 mb-2">
  <div class="col-auto"><input type="submit" name="featured_add" value="Add to Featured" class="btn btn-primary"></div>
  <div class="col-auto"><input type="submit" name="export_direct" value="Export direct download links" class="btn btn-primary"></div>
</div>

  <div class="row g-2 mb-2">

      <div class="col-auto"><input type="button" name="reencode_selected" value="Re-encode" class="btn btn-primary" onclick="$('#extra1').modal('show');return false;"></div>
      <div class="col-auto"><input type="submit" name="rethumb_selected" value="Regen thumbnail" class="btn btn-primary"></div>
      <div class="col-auto"><input type="submit" name="reparse_selected" value="Reparse info" class="btn btn-primary"></div>
      <TMPL_IF m_x><div class="col-auto"><input type="submit" name="rescreen_selected" value="Regen screenlist" class="btn btn-primary"></div></TMPL_IF>
      <TMPL_IF m_z><div class="col-auto"><input type="submit" name="reslide_selected" value="Regen timeslides" class="btn btn-primary"></div></TMPL_IF>
</div>


<div class="row g-2 mb-2">
  <div class="col-auto"><input type="button" value="Transfer to..." class="btn btn-success" onclick="$('#trans_id').modal('show');"></div>
  <div class="col-auto"><input type="button" value="Change status..." class="btn btn-success" onclick="$('#status_id').modal('show');"></div>
</div>





      <div>
      	<input type="button" value="Delete Special..." class="btn btn-secondary" onClick="$(this).hide();$('#del_spec').show();">
      	<div id="del_spec" style="display:none">
          <input type="hidden" name="del_special" value="">
  	        <div class="row g-2 mb-2">
    	        <div class="col-auto"><input type="button" value="Delete Normal" class="btn btn-secondary" onClick="if(!confirm('Delete Normal Quality versions for selected files?'))return false;this.form.del_special.value='n';this.form.submit();"></div>
    	        <TMPL_IF m_h>
    	        <div class="col-auto"><input type="button" value="Delete Low" class="btn btn-secondary" onClick="if(!confirm('Delete Low Quality versions for selected files?'))return false;this.form.del_special.value='l';this.form.submit();"></div>
    	        <div class="col-auto"><input type="button" value="Delete HD" class="btn btn-secondary" onClick="if(!confirm('Delete High Quality versions for selected files?'))return false;this.form.del_special.value='h';this.form.submit();"></div>
    	        <div class="col-auto"><input type="button" value="Delete HD2" class="btn btn-secondary" onClick="if(!confirm('Delete High2 Quality versions for selected files?'))return false;this.form.del_special.value='x';this.form.submit();"></div>
    	        </TMPL_IF>
    	        <div class="col-auto"><input type="button" value="Delete Orig" class="btn btn-secondary" onClick="if(!confirm('Delete Original versions for selected files?'))return false;this.form.del_special.value='o';this.form.submit();"></div>
            </div>
      	</div>

      </div>



      </div>
      </TH>
  </TR>
</tfoot>
</Table>
</div>


<div class="modal fade" id="trans_id" tabindex="-1">
          <div class="modal-dialog modal-dialog-centered modal-sm">
            <div class="modal-content border-0">
              <div class="modal-header">
                <h1 class="modal-title fs-5">Transfer to...</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">

                <select class="form-select" name="srv_id2">
                <option value="">Transfer files to</option>
                    <TMPL_LOOP hosts>
                    <optgroup label="<TMPL_VAR host_name>">
                    <TMPL_LOOP servers><option value="<TMPL_VAR srv_id>"><TMPL_VAR srv_id> - <TMPL_VAR srv_name></option></TMPL_LOOP>
                    </optgroup>
                </TMPL_LOOP>
                </select>

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Close</button>
                  <input type="submit" name="transfer_files" value="Transfer" class="btn btn-success">
              </div>
            </div>
          </div>
        </div>
<div class="modal fade" id="status_id" tabindex="-1">
          <div class="modal-dialog modal-dialog-centered modal-sm">
            <div class="modal-content border-0">
              <div class="modal-header">
                <h1 class="modal-title fs-5">Change status...</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">

                <select class="form-select" name="file_status2">
                <option>OK</option>
                <option>PENDING</option>
                <option>LOCKED</option>
                </select>

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Close</button>
                <input type="submit" name="change_status" value="Change" class="btn btn-success">
              </div>
            </div>
          </div>
        </div>



<TMPL_VAR paging>




        <div class="modal fade" id="extra1" tabindex="-1">
                  <div class="modal-dialog modal-dialog-centered modal-lg">
                    <div class="modal-content border-0">
                      <div class="modal-header">
                        <h1 class="modal-title fs-5">Effects</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <table class="table settings-table mb-0 align-middle">
                        <tbody>
                          <TMPL_INCLUDE file_effects.html>
                        </tbody>
                      </table>
                      <div class="modal-footer border-top-0">
                        <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Close</button>
                            <input type="submit" name="reencode_selected" value="Re-encode selected" class="btn btn-primary">
                      </div>
                    </div>
                  </div>
                </div>



</Form>


<script src="<TMPL_VAR static_url>/js/jquery.cookie.js"></script>
<script>
$(document).ready(function(){
    $("#btn1").click( function(e){
        $("#btn1").hide("normal", function(){
            $("#mass_search").show("normal");
            });
        return false;
    });
    $("#xfiles input[name=file_id]").change( function(){ $(this).parent().parent().toggleClass('hi2'); } );
    $("#selall").change(function(){
           var sel=this.checked;

           $("#xfiles input[name=file_id]:enabled").each(function(){
               $(this).prop('checked',sel);
               if(sel){$(this).parent().parent().addClass('hi2');} else {$(this).parent().parent().removeClass('hi2');}
           });
    });
    $("input[name=file_id]:enabled").shiftSelectable();
    $('input[name=thumbnail]').change(function(){
        var sel=0;
        if(this.checked)sel=1;
        $.cookie('adm_thumb_mode', sel, { expires: 24*30 });
    });
});
</script>
<script src="<TMPL_VAR static_url>/js/jquery.lbox.js"></script>
